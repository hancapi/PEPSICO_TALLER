{% extends "base_public.html" %}
{% load static %}

{% block title %}Iniciar Sesi√≥n | Taller PepsiCo Chile{% endblock %}

{% block content %}

<div class="login-card fade-in">

  <h2 class="login-title">üîê Iniciar Sesi√≥n</h2>
  <p class="login-subtitle">Accede al sistema de gesti√≥n de veh√≠culos PepsiCo Chile</p>

  {# Indicador de entorno, lo usa login.js #}
  <div id="envIndicator" class="login-env mb-3">
    Entorno verificando‚Ä¶
  </div>

  <form id="loginForm" method="post">
    {% csrf_token %}

    <label class="form-label">Usuario</label>
    <input
      type="text"
      id="usuario"
      name="usuario"
      class="form-control login-input"
      placeholder="Ingresa tu usuario"
      autocomplete="username"
    >

    <label class="form-label mt-3">Contrase√±a</label>
    <input
      type="password"
      id="contrasena"
      name="contrasena"
      class="form-control login-input"
      placeholder="*******"
      autocomplete="current-password"
    >

    <button
      id="loginButton"
      type="submit"
      class="btn login-btn mt-4"
    >
      <span
        id="loadingSpinner"
        class="spinner-border spinner-border-sm me-2"
        style="display:none"
        role="status"
        aria-hidden="true"
      ></span>
      <span id="buttonText">üîê Ingresar al Sistema</span>
    </button>
  </form>

  {# Alertas controladas por login.js #}
  <div
    id="errorAlert"
    class="alert alert-danger mt-3 d-none"
    role="alert"
  >
    <span id="errorMessage"></span>
  </div>

  <div
    id="successAlert"
    class="alert alert-success mt-3 d-none"
    role="alert"
  >
    <span id="successMessage"></span>
  </div>

  {# Estado servidor / BD, tambi√©n usado por login.js #}
  <div class="mt-3 small text-muted">
    <span>
      Servidor:
      <span id="serverStatus" class="badge bg-secondary">
        Verificando‚Ä¶
      </span>
    </span>
    <span class="ms-2">
      BD:
      <span id="dbStatus" class="badge bg-secondary">
        Verificando‚Ä¶
      </span>
    </span>
  </div>

</div>

<script src="{% static 'js/login.js' %}"></script>
{% endblock %}
