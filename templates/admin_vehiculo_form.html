{# templates/admin_vehiculo_form.html #}
{% extends "base.html" %}
{% load static %}
{% load roles %}

{% block title %}
  {% if is_edit %}
    Editar Veh√≠culo | Taller PepsiCo Chile
  {% else %}
    Nuevo Veh√≠culo | Taller PepsiCo Chile
  {% endif %}
{% endblock %}

{% block content %}
<div class="page-container fade-in">

  <!-- ENCABEZADO -->
  <div class="welcome-card mb-4">
    <div class="welcome-content">
      <div class="welcome-avatar">üöó</div>
      <div class="welcome-text">
        {% if is_edit %}
          <h1>Editar Veh√≠culo</h1>
          <p>Modifica los datos del veh√≠culo <strong>{{ vehiculo.patente }}</strong>.</p>
        {% else %}
          <h1>Nuevo Veh√≠culo</h1>
          <p>Ingresa los datos para dar de alta un nuevo veh√≠culo.</p>
        {% endif %}
      </div>
    </div>
  </div>

  <!-- FORMULARIO -->
  <div class="card">
    <div class="card-body">
      <form method="post" novalidate>
        {% csrf_token %}

        {# Errores generales del formulario #}
        {% if form.non_field_errors %}
          <div class="alert alert-danger">
            {% for err in form.non_field_errors %}
              <div>{{ err }}</div>
            {% endfor %}
          </div>
        {% endif %}

        <div class="row g-3">

          {% for field in form %}
            <div class="col-md-4">
              <div class="mb-3">
                <label class="form-label" for="{{ field.id_for_label }}">
                  {{ field.label }}
                </label>
                {{ field }}

                {% if field.help_text %}
                  <div class="form-text">{{ field.help_text }}</div>
                {% endif %}

                {% for err in field.errors %}
                  <div class="text-danger small">{{ err }}</div>
                {% endfor %}
              </div>
            </div>
          {% endfor %}

        </div>

        <div class="mt-3">
          <button type="submit" class="btn btn-primary">
            {% if is_edit %}Guardar cambios{% else %}Crear veh√≠culo{% endif %}
          </button>
          <a href="{% url 'autenticacion:admin-web-vehiculos' %}"
             class="btn btn-outline-secondary">
            Cancelar
          </a>
        </div>
      </form>
    </div>
  </div>

</div>
{% endblock %}
